<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Explore unforgettable travel experiences with NOMAA Tours, Adventures, & More.">
    <title>NOMAA Tours, Adventures, and More</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Link to Google Fonts for 'Inter' as used in styles.css -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1>Welcome to NOMAA Tours, Adventures, & More</h1>
        <p>Explore the world with unforgettable experiences</p>
    </header>

    <nav>
        <a href="#about">About Us</a>
        <a href="#tours">Tours & Packages</a>
        <a href="#accommodations-crafts">Accommodations & Crafts</a>
        <a href="#events-celebrations">Events & Celebrations</a>
        <a href="#testimonials">Testimonials</a>
        <a href="#gallery">Gallery</a>
        <a href="#contact">Contact Us</a>
    </nav>

    <div class="slideshow">
        <div class="slide active" style="background-image: url('images/1.jpg');">
            <img src="images/1.jpg" alt="Scenic landscape" style="display: none;">
        </div>
        <div class="slide" style="background-image: url('images/2.jpg');">
            <img src="images/2.jpg" alt="Beautiful beach" style="display: none;">
        </div>
        <div class="slide" style="background-image: url('images/3.jpg');">
            <img src="images/3.jpg" alt="Mountain view" style="display: none;">
        </div>
        <div class="slide" style="background-image: url('images/4.jpg');">
            <img src="images/4.jpg" alt="Tropical forest" style="display: none;">
        </div>
        <noscript>
            <img src="images/default.jpg" alt="Default image" style="width: 100%; height: auto;">
        </noscript>
        <div class="overlay">
            <p>Your adventure starts here!</p>
        </div>
    </div>

    <section id="about">
        <div class="container">
            <h2>About Us</h2>
            <p>We are a local tour company dedicated to providing exceptional travel experiences in Jamaica. With years of experience and deep local knowledge, our passionate team ensures every guest discovers the authentic beauty of our island paradise.</p>
            <p>At NOMAA Tours, we combine adventure, culture, and relaxation to create unforgettable journeys that showcase the best of Jamaica. From hidden waterfalls and secluded beaches to vibrant cultural experiences, we'll guide you through the heart and soul of our beautiful country.</p>
        </div>
    </section>

    <section id="tours">
        <div class="container">
            <h2>Our Tours & Packages</h2>
            <p>Choose from a variety of tours tailored to suit your preferences. <strong>Adventure Awaits!</strong></p>

            <div class="packages">
                <div class="package">
                    <h3>Jamaica Adventure Tour</h3>
                    <p>Explore the best of Jamaica with this adventure-packed tour. From the Blue Mountains to the stunning beaches of Negril, this tour has it all.</p>
                    <p><strong>Price:</strong> $499 USD</p>
                    <button onclick="showBookingForm('Jamaica Adventure Tour', 499);">Book Now</button>
                </div>

                <div class="package">
                    <h3>Culture & Heritage Tour</h3>
                    <p>Immerse yourself in Jamaican history and culture. Visit iconic landmarks, experience authentic local cuisine, and learn about the island's rich heritage.</p>
                    <p><strong>Price:</strong> $350 USD</p>
                    <button onclick="showBookingForm('Culture & Heritage Tour', 350);">Book Now</button>
                </div>

                <div class="package">
                    <h3>Beach Relaxation Package</h3>
                    <p>Unwind on Jamaica's most beautiful beaches. This package includes access to exclusive resorts, beachfront accommodations, and spa treatments.</p>
                    <p><strong>Price:</strong> $799 USD</p>
                    <button onclick="showBookingForm('Beach Relaxation Package', 799);">Book Now</button>
                </div>

                <div class="package">
                    <h3>Eco-Tourism & Nature Escape</h3>
                    <p>For nature lovers! Explore hidden waterfalls, hike through lush forests, and experience the natural beauty of Jamaica like never before.</p>
                    <p><strong>Price:</strong> $450 USD</p>
                    <button onclick="showBookingForm('Eco-Tourism & Nature Escape', 450);">Book Now</button>
                </div>

                <div class="package">
                    <h3>Family Fun Tour</h3>
                    <p>Perfect for families! Enjoy a mix of adventure, culture, and relaxation with activities that all ages can enjoy.</p>
                    <p><strong>Price:</strong> $600 USD</p>
                    <button onclick="showBookingForm('Family Fun Tour', 600);">Book Now</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Accommodations & Local Crafts Section -->
    <section id="accommodations-crafts" class="new-section">
        <div class="container">
            <h2>Accommodations & Local Crafts</h2>
            <div class="content-block">
                <div class="text-content">
                    <h3>Bed and Breakfast Stays</h3>
                    <p>Experience the warmth of Jamaican hospitality with our curated Bed and Breakfast options. Stay in charming, locally-run establishments that offer an authentic taste of island living.</p>
                    <a href="#contact" class="btn btn-primary">Inquire About B&B Stays</a>
                </div>
                <div class="text-content">
                    <h3>Crochet Workshops & Craft Sales</h3>
                    <p>Immerse yourself in our vibrant culture with crochet workshops and unique craft experiences. Learn the art of traditional Jamaican crochet and take home a handmade souvenir, or find beautiful, locally-made items.</p>
                    <a href="#contact" class="btn btn-secondary">Book a Crochet Experience</a>
                </div>
            </div>
            <!-- Add your images here -->
            <div class="image-gallery">
                <!-- Fallback placeholders added for robustness -->
                <img src="images/bnb1.jpg" alt="Cozy Jamaican Bed and Breakfast" onerror="this.onerror=null;this.src='https://placehold.co/600x400/007A3D/FFFFFF?text=B%26B+Placeholder';" />
                <img src="images/crochet-workshop.jpg" alt="Jamaican Crochet Workshop" onerror="this.onerror=null;this.src='https://placehold.co/600x400/FEC700/2D2926?text=Crochet+Placeholder';" />
            </div>
        </div>
    </section>

    <!-- Events & Celebrations Section -->
    <section id="events-celebrations" class="new-section">
        <div class="container">
            <h2>Events & Celebrations</h2>
            <p>Let NOMAA Tours help you plan your unforgettable special occasion in Jamaica. From intimate beach weddings to vibrant birthday parties and significant family celebrations, we offer comprehensive event planning and coordination services.</p>
            <p>Our team works with you to create a seamless and memorable event, handling everything from venue selection and catering to local entertainment and personalized itineraries. Make your special moments truly magical against the backdrop of our beautiful island.</p>
            <a href="#contact" class="btn btn-primary">Request a Quote</a>
            <!-- Optionally, add event-themed images -->
            <div class="image-gallery">
                <img src="images/wedding.jpg" alt="Jamaican Beach Wedding" onerror="this.onerror=null;this.src='https://placehold.co/600x400/17a2b8/FFFFFF?text=Wedding+Placeholder';" />
                <img src="images/party.jpg" alt="Jamaican Celebration Party" onerror="this.onerror=null;this.src='https://placehold.co/600x400/4CAF50/FFFFFF?text=Party+Placeholder';" />
            </div>
        </div>
    </section>

    <section id="testimonials">
        <div class="container">
            <h2>What Our Clients Say</h2>
            <div class="testimonials-container">
                <div class="testimonial">
                    <blockquote>
                        <p>"This was the best trip of my life! The guides were knowledgeable and friendly, and we got to experience the true Jamaica. Highly recommend."</p>
                        <cite>- Sarah Johnson, New York</cite>
                    </blockquote>
                </div>
                <div class="testimonial">
                    <blockquote>
                        <p>"The Beach Relaxation Package exceeded all expectations. The staff made us feel like family, and the beaches were absolutely stunning."</p>
                        <cite>- Mark and Lisa Thompson, Canada</cite>
                    </blockquote>
                </div>
                <div class="testimonial">
                    <blockquote>
                        <p>"We did the Family Fun Tour with our kids and it was perfect - everyone from our 8-year-old to our teenagers found something to love!"</p>
                        <cite>- The Wilson Family, London</cite>
                    </blockquote>
                </div>
            </div>
        </div>
    </section>

    <section id="gallery">
        <div class="container">
            <h2>Gallery</h2>
            <p>Take a peek at some of the breathtaking destinations we offer.</p>
            <div class="gallery-container">
                <div class="gallery-item">
                    <img src="images/1.jpg" alt="Jamaica beach" onerror="this.onerror=null;this.src='https://placehold.co/400x300/4CAF50/FFFFFF?text=Beach+1';" />
                </div>
                <div class="gallery-item">
                    <img src="images/2.jpg" alt="Blue mountain" onerror="this.onerror=null;this.src='https://placehold.co/400x300/17a2b8/FFFFFF?text=Mountain+2';" />
                </div>
                <div class="gallery-item">
                    <img src="images/3.jpg" alt="Waterfall" onerror="this.onerror=null;this.src='https://placehold.co/400x300/4CAF50/FFFFFF?text=Waterfall+3';" />
                </div>
                <div class="gallery-item">
                    <img src="images/4.jpg" alt="Jamaica sunset" onerror="this.onerror=null;this.src='https://placehold.co/400x300/17a2b8/FFFFFF?text=Sunset+4';" />
                </div>
                <div class="gallery-item">
                    <img src="images/5.jpg" alt="Jamaican culture" onerror="this.onerror=null;this.src='https://placehold.co/400x300/4CAF50/FFFFFF?text=Culture+5';" />
                </div>
                <div class="gallery-item">
                    <img src="images/6.jpg" alt="Tropical forest" onerror="this.onerror=null;this.src='https://placehold.co/400x300/17a2b8/FFFFFF?text=Forest+6';" />
                </div>
            </div>
        </div>
    </section>

    <section id="contact">
        <div class="container">
            <h2>Contact Us</h2>
            <p>Email: Nomaaadventoursandmorejamaica@gmail.com</p>
            <p>Phone: 876-405-9605 | 876-830-2712 | 876-484-7700</p>
            <p>Facebook: <a href="https://www.facebook.com/NomaaAdventoursAndMoreJamaica" target="_blank" rel="noopener noreferrer">Nomaa Adventours and More Jamaica</a></p>
            <div id="map"></div>
        </div>
    </section>

    <footer>
        <p>© 2025 NOMAA Tours, Adventures, & More. All rights reserved. One Love,One Jamaica!</p>
    </footer>

    <div class="booking-form" id="bookingForm">
        <div class="booking-form-content">
            <h3>Book Your Tour Now</h3>
            <form id="bookTourForm">
                <label for="name">Your Name:</label>
                <input type="text" id="name" name="name" placeholder="Your Name" required />
                <div id="name-error" class="error-message"></div>

                <label for="email">Your Email:</label>
                <input type="email" id="email" name="email" placeholder="Your Email" required />
                <div id="email-error" class="error-message"></div>

                <label for="phone">Your Phone Number:</label>
                <input type="text" id="phone" name="phone" placeholder="Your Phone Number" required />
                <div id="phone-error" class="error-message"></div>

                <label for="date">Tour Date:</label>
                <input type="date" id="date" name="date" required />
                <div id="date-error" class="error-message"></div>

                <input type="hidden" id="tourName" name="tourName" />
                <input type="hidden" id="tourPrice" name="tourPrice" />
                <button type="submit">Submit</button>
                <button type="button" onclick="closeBookingForm();">Close</button>
                <div class="loading-indicator" style="display: none;">Processing...</div>
                <div id="form-message" style="margin-top: 10px;"></div>
            </form>
        </div>
    </div>

    <script>
        function showBookingForm(tourName, tourPrice) {
            document.getElementById('tourName').value = tourName;
            document.getElementById('tourPrice').value = tourPrice;
            document.getElementById('bookingForm').style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Prevent scrolling when form is open
        }

        function closeBookingForm() {
            document.getElementById('bookingForm').style.display = 'none';
            document.body.style.overflow = ''; // Restore scrolling
            // Reset form and error messages
            document.getElementById('bookTourForm').reset();
            document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
            document.getElementById('form-message').textContent = '';
        }

        let slides = document.querySelectorAll('.slide');
        let currentSlide = 0;

        function showNextSlide() {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('active');
        }

        // Start slideshow
        setInterval(showNextSlide, 4000);

        document.getElementById('bookTourForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const date = document.getElementById('date').value;
            const tourName = document.getElementById('tourName').value;
            const tourPrice = document.getElementById('tourPrice').value;

            let hasErrors = false;

            document.getElementById('name-error').textContent = '';
            document.getElementById('email-error').textContent = '';
            document.getElementById('phone-error').textContent = '';
            document.getElementById('date-error').textContent = '';

            if (!name) {
                document.getElementById('name-error').textContent = 'Please enter your name.';
                hasErrors = true;
            }

            const emailRegex = /^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/;
            if (!email) {
                document.getElementById('email-error').textContent = 'Please enter your email address.';
                hasErrors = true;
            } else if (!emailRegex.test(email)) {
                document.getElementById('email-error').textContent = 'Please enter a valid email address.';
                hasErrors = true;
            }

            const phoneRegex = /^(\+?1-?)?(\d{3})[- ]?\d{3}[- ]?\d{4}$/;
            if (!phone) {
                document.getElementById('phone-error').textContent = 'Please enter your phone number.';
                hasErrors = true;
            } else if (!phoneRegex.test(phone)) {
                document.getElementById('phone-error').textContent = 'Please enter a valid phone number.';
                hasErrors = true;
            }

            const selectedDate = new Date(date);
            const today = new Date();
            today.setHours(0, 0, 0, 0); // Reset hours for accurate date comparison
            if (!date) {
                document.getElementById('date-error').textContent = 'Please select a tour date.';
                hasErrors = true;
            } else if (selectedDate < today) {
                document.getElementById('date-error').textContent = 'Please select a future date.';
                hasErrors = true;
            }

            if (hasErrors) {
                return;
            }

            document.querySelector('.loading-indicator').style.display = 'block';
            document.getElementById('form-message').textContent = '';

            // This fetch request sends data to your serverless function (send-email.js)
            // which will handle sending actual emails.
            fetch('/api/send-email', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    name: name,
                    email: email,
                    phone: phone,
                    date: date,
                    tourName: tourName,
                    tourPrice: tourPrice,
                }),
            })
            .then(response => {
                if (!response.ok) {
                    // If the serverless function returns an error (e.g., 400, 500)
                    // it will be caught here.
                    return response.json().then(errData => {
                        throw new Error(errData.error || 'Network response was not ok');
                    });
                }
                return response.json(); // Assuming the serverless function returns JSON
            })
            .then(data => {
                document.querySelector('.loading-indicator').style.display = 'none';
                // Display the success message from the serverless function
                document.getElementById('form-message').textContent = data.message;
                if (data.success) { // Check for a success flag from the serverless function
                    document.getElementById('bookTourForm').reset();
                    setTimeout(closeBookingForm, 3000); // Close after 3 seconds on success
                }
            })
            .catch(error => {
                document.querySelector('.loading-indicator').style.display = 'none';
                document.getElementById('form-message').textContent = `Booking failed: ${error.message}`;
                console.error('Error submitting booking:', error);
            });

            // IMPORTANT: The Gemini API call for generating a confirmation message
            // was previously here. If you wish to use it for *client-side* message
            // generation (separate from email sending), you would re-add it here.
            // Example:
            /*
            const prompt = `Generate a confirmation message for a tour booking.
            Booking Details:
            Tour Name: ${tourName}
            Price: $${tourPrice}
            Date: ${date}
            Customer Name: ${name}
            Email: ${email}
            Phone: ${phone}

            The message should be polite, confirm the booking details, and state that the customer will be contacted shortly for payment and further arrangements.`;

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = ""; // Canvas will provide this at runtime.

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            })
            .then(response => response.json())
            .then(result => {
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const confirmationMessage = result.candidates[0].content.parts[0].text;
                    // You might append this to the form-message or show it in a different dialog
                    // document.getElementById('form-message').textContent += '\n' + confirmationMessage;
                }
            })
            .catch(error => {
                console.error('Error calling Gemini API for confirmation message:', error);
            });
            */
        });

        // Event listener for Escape key to close booking form
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeBookingForm();
            }
        });

        // Event listener to close booking form when clicking outside the content
        document.getElementById('bookingForm').addEventListener('click', function(e) {
            if (e.target === this) {
                closeBookingForm();
            }
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Initialize Map
        function initMap() {
            const mapDiv = document.getElementById('map');
            if (mapDiv) {
                // Using iframe for Google Maps. Replace YOUR_API_KEY with your actual Google Maps API key
                mapDiv.innerHTML = '<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d384073.4984277789!2d-77.58434771971794!3d18.069416551608035!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8edb31498b0a96f1%3A0x6b4f7a0c5c3c0a52!2sJamaica!5e0!3m2!1sen!2sus!4v1701723456789!5m2!1sen!2sus" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>';
                mapDiv.style.borderRadius = 'var(--border-radius-base)'; // Apply border radius from CSS
            }
            // For a more interactive map with markers/custom styles, you would load the Google Maps JavaScript API
            // and initialize the map like this (requires a valid API key enabled for Maps JavaScript API):
            /*
            if (typeof google !== 'undefined' && google.maps) {
                const jamaica = { lat: 18.1096, lng: -77.2975 };
                const map = new google.maps.Map(document.getElementById('map'), {
                    center: jamaica,
                    zoom: 8,
                    styles: [
                        { "featureType": "water", "elementType": "geometry", "stylers": [{"color": "#e9e9e9"},{"lightness": 17}] },
                        { "featureType": "landscape", "elementType": "geometry", "stylers": [{"color": "#f5f5f5"},{"lightness": 20}] },
                        { "featureType": "road.highway", "elementType": "geometry.fill", "stylers": [{"color": "#ffffff"},{"lightness": 17}] }
                    ]
                });
                const marker = new google.maps.Marker({
                    position: jamaica,
                    map: map,
                    title: 'NOMAA Tours',
                    animation: google.maps.Animation.DROP
                });
                const infoWindow = new google.maps.InfoWindow({
                    content: '<div><strong>NOMAA Tours, Adventures, & More</strong><br>Jamaica<br>Phone: 876-405-9605</div>'
                });
                marker.addListener('click', function() {
                    infoWindow.open(map, marker);
                });
            }
            */
        }

        // Call initMap when the window loads
        window.onload = initMap;
    </script>
    <!-- REMINDER: For a dynamic Google Map, uncomment the following line and replace YOUR_API_KEY -->
    <!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script> -->
</body>
</html>
